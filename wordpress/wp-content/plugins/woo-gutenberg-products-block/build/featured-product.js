!function(e,t){for(var n in t)e[n]=t[n]}(this,function(e){function t(t){for(var r,s,a=t[0],i=t[1],l=t[2],d=0,b=[];d<a.length;d++)s=a[d],o[s]&&b.push(o[s][0]),o[s]=0;for(r in i)Object.prototype.hasOwnProperty.call(i,r)&&(e[r]=i[r]);for(u&&u(t);b.length;)b.shift()();return c.push.apply(c,l||[]),n()}function n(){for(var e,t=0;t<c.length;t++){for(var n=c[t],r=!0,a=1;a<n.length;a++){var i=n[a];0!==o[i]&&(r=!1)}r&&(c.splice(t--,1),e=s(s.s=n[0]))}return e}var r={},o={1:0},c=[];function s(t){if(r[t])return r[t].exports;var n=r[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,s),n.l=!0,n.exports}s.m=e,s.c=r,s.d=function(e,t,n){s.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},s.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.t=function(e,t){if(1&t&&(e=s(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(s.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)s.d(n,r,function(t){return e[t]}.bind(null,r));return n},s.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return s.d(t,"a",t),t},s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},s.p="";var a=window.webpackJsonp=window.webpackJsonp||[],i=a.push.bind(a);a.push=t,a=a.slice();for(var l=0;l<a.length;l++)t(a[l]);var u=i;return c.push([711,0]),n()}({0:function(e,t){!function(){e.exports=this.wp.element}()},14:function(e,t){!function(){e.exports=this.wp.apiFetch}()},15:function(e,t){!function(){e.exports=this.wp.compose}()},17:function(e,t,n){"use strict";var r=n(0),o=n(3),c=function(){return Object(r.createElement)(o.Icon,{icon:Object(r.createElement)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24"},Object(r.createElement)("path",{fill:"#1E8CBE",d:"M19 3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.11 0 2-.9 2-2V5c0-1.1-.89-2-2-2zm-9 14l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"}))})},s=function(){return Object(r.createElement)(o.Icon,{icon:Object(r.createElement)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24"},Object(r.createElement)("path",{fill:"#6C7781",d:"M19 5v14H5V5h14m0-2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2z"}))})},a=function(){return Object(r.createElement)(o.Icon,{icon:Object(r.createElement)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24"},Object(r.createElement)("path",{d:"M0 0h24v24H0z",fill:"none"}),Object(r.createElement)("path",{d:"M23 12l-2.44-2.78.34-3.68-3.61-.82-1.89-3.18L12 3 8.6 1.54 6.71 4.72l-3.61.81.34 3.68L1 12l2.44 2.78-.34 3.69 3.61.82 1.89 3.18L12 21l3.4 1.46 1.89-3.18 3.61-.82-.34-3.68L23 12zm-10 5h-2v-2h2v2zm0-4h-2V7h2v6z"}))})},i=function(){return Object(r.createElement)(o.Icon,{icon:Object(r.createElement)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24"},Object(r.createElement)("path",{fill:"#1E8CBE",d:"M12 7c-2.76 0-5 2.24-5 5s2.24 5 5 5 5-2.24 5-5-2.24-5-5-5zm0-5C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8z"}))})},l=function(){return Object(r.createElement)(o.Icon,{icon:Object(r.createElement)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24"},Object(r.createElement)("path",{fill:"#6C7781",d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8z"}))})},u=function(){return Object(r.createElement)(o.Icon,{icon:Object(r.createElement)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24"},Object(r.createElement)("path",{d:"M13 13v8h8v-8h-8zM3 21h8v-8H3v8zM3 3v8h8V3H3zm13.66-1.31L11 7.34 16.66 13l5.66-5.66-5.66-5.65z"}),Object(r.createElement)("path",{d:"M0 0h24v24H0z",fill:"none"}))})};n.d(t,"a",function(){return c}),n.d(t,"b",function(){return s}),n.d(t,"c",function(){return a}),n.d(t,"d",function(){return i}),n.d(t,"e",function(){return l}),n.d(t,"f",function(){return u})},173:function(e,t,n){var r=n(174);"string"==typeof r&&(r=[[e.i,r,""]]);var o={hmr:!0,transform:void 0,insertInto:void 0};n(27)(r,o);r.locals&&(e.exports=r.locals)},174:function(e,t,n){},177:function(e,t){!function(){e.exports=this.wp.data}()},199:function(e,t,n){var r={"./af":42,"./af.js":42,"./ar":43,"./ar-dz":44,"./ar-dz.js":44,"./ar-kw":45,"./ar-kw.js":45,"./ar-ly":46,"./ar-ly.js":46,"./ar-ma":47,"./ar-ma.js":47,"./ar-sa":48,"./ar-sa.js":48,"./ar-tn":49,"./ar-tn.js":49,"./ar.js":43,"./az":50,"./az.js":50,"./be":51,"./be.js":51,"./bg":52,"./bg.js":52,"./bm":53,"./bm.js":53,"./bn":54,"./bn.js":54,"./bo":55,"./bo.js":55,"./br":56,"./br.js":56,"./bs":57,"./bs.js":57,"./ca":58,"./ca.js":58,"./cs":59,"./cs.js":59,"./cv":60,"./cv.js":60,"./cy":61,"./cy.js":61,"./da":62,"./da.js":62,"./de":63,"./de-at":64,"./de-at.js":64,"./de-ch":65,"./de-ch.js":65,"./de.js":63,"./dv":66,"./dv.js":66,"./el":67,"./el.js":67,"./en-au":68,"./en-au.js":68,"./en-ca":69,"./en-ca.js":69,"./en-gb":70,"./en-gb.js":70,"./en-ie":71,"./en-ie.js":71,"./en-il":72,"./en-il.js":72,"./en-nz":73,"./en-nz.js":73,"./eo":74,"./eo.js":74,"./es":75,"./es-do":76,"./es-do.js":76,"./es-us":77,"./es-us.js":77,"./es.js":75,"./et":78,"./et.js":78,"./eu":79,"./eu.js":79,"./fa":80,"./fa.js":80,"./fi":81,"./fi.js":81,"./fo":82,"./fo.js":82,"./fr":83,"./fr-ca":84,"./fr-ca.js":84,"./fr-ch":85,"./fr-ch.js":85,"./fr.js":83,"./fy":86,"./fy.js":86,"./gd":87,"./gd.js":87,"./gl":88,"./gl.js":88,"./gom-latn":89,"./gom-latn.js":89,"./gu":90,"./gu.js":90,"./he":91,"./he.js":91,"./hi":92,"./hi.js":92,"./hr":93,"./hr.js":93,"./hu":94,"./hu.js":94,"./hy-am":95,"./hy-am.js":95,"./id":96,"./id.js":96,"./is":97,"./is.js":97,"./it":98,"./it.js":98,"./ja":99,"./ja.js":99,"./jv":100,"./jv.js":100,"./ka":101,"./ka.js":101,"./kk":102,"./kk.js":102,"./km":103,"./km.js":103,"./kn":104,"./kn.js":104,"./ko":105,"./ko.js":105,"./ky":106,"./ky.js":106,"./lb":107,"./lb.js":107,"./lo":108,"./lo.js":108,"./lt":109,"./lt.js":109,"./lv":110,"./lv.js":110,"./me":111,"./me.js":111,"./mi":112,"./mi.js":112,"./mk":113,"./mk.js":113,"./ml":114,"./ml.js":114,"./mn":115,"./mn.js":115,"./mr":116,"./mr.js":116,"./ms":117,"./ms-my":118,"./ms-my.js":118,"./ms.js":117,"./mt":119,"./mt.js":119,"./my":120,"./my.js":120,"./nb":121,"./nb.js":121,"./ne":122,"./ne.js":122,"./nl":123,"./nl-be":124,"./nl-be.js":124,"./nl.js":123,"./nn":125,"./nn.js":125,"./pa-in":126,"./pa-in.js":126,"./pl":127,"./pl.js":127,"./pt":128,"./pt-br":129,"./pt-br.js":129,"./pt.js":128,"./ro":130,"./ro.js":130,"./ru":131,"./ru.js":131,"./sd":132,"./sd.js":132,"./se":133,"./se.js":133,"./si":134,"./si.js":134,"./sk":135,"./sk.js":135,"./sl":136,"./sl.js":136,"./sq":137,"./sq.js":137,"./sr":138,"./sr-cyrl":139,"./sr-cyrl.js":139,"./sr.js":138,"./ss":140,"./ss.js":140,"./sv":141,"./sv.js":141,"./sw":142,"./sw.js":142,"./ta":143,"./ta.js":143,"./te":144,"./te.js":144,"./tet":145,"./tet.js":145,"./tg":146,"./tg.js":146,"./th":147,"./th.js":147,"./tl-ph":148,"./tl-ph.js":148,"./tlh":149,"./tlh.js":149,"./tr":150,"./tr.js":150,"./tzl":151,"./tzl.js":151,"./tzm":152,"./tzm-latn":153,"./tzm-latn.js":153,"./tzm.js":152,"./ug-cn":154,"./ug-cn.js":154,"./uk":155,"./uk.js":155,"./ur":156,"./ur.js":156,"./uz":157,"./uz-latn":158,"./uz-latn.js":158,"./uz.js":157,"./vi":159,"./vi.js":159,"./x-pseudo":160,"./x-pseudo.js":160,"./yo":161,"./yo.js":161,"./zh-cn":162,"./zh-cn.js":162,"./zh-hk":163,"./zh-hk.js":163,"./zh-tw":164,"./zh-tw.js":164};function o(e){var t=c(e);return n(t)}function c(e){var t=r[e];if(!(t+1)){var n=new Error("Cannot find module '"+e+"'");throw n.code="MODULE_NOT_FOUND",n}return t}o.keys=function(){return Object.keys(r)},o.resolve=c,e.exports=o,o.id=199},2:function(e,t){!function(){e.exports=this.wp.i18n}()},202:function(e,t){},203:function(e,t){},205:function(e,t){},206:function(e,t){},23:function(e,t){!function(){e.exports=this.wp.url}()},24:function(e,t,n){"use strict";var r=n(26),o=n.n(r),c=n(168),s=n.n(c),a=n(0),i=n(4),l=n(3),u=n(1),d=n.n(u),b=n(17);function m(e,t){if(!t)return e;var n=new RegExp(Object(i.escapeRegExp)(t),"ig");return e.replace(n,"<strong>$&</strong>")}var p=function(e){var t=e.className,n=e.depth,r=void 0===n?0:n,c=e.item,u=e.isSelected,d=e.isSingle,p=e.onSelect,h=e.search,j=void 0===h?"":h,g=e.showCount,f=void 0!==g&&g,v=s()(e,["className","depth","item","isSelected","isSingle","onSelect","search","showCount"]),O=[t,"woocommerce-search-list__item"];O.push("depth-".concat(r)),d&&O.push("is-radio-button");var w,k=c.breadcrumbs&&c.breadcrumbs.length;return Object(a.createElement)(l.MenuItem,o()({role:d?"menuitemradio":"menuitemcheckbox",className:O.join(" "),onClick:p(c),isSelected:u},v),Object(a.createElement)("span",{className:"woocommerce-search-list__item-state"},function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return e?t?Object(a.createElement)(b.d,null):Object(a.createElement)(b.e,null):t?Object(a.createElement)(b.a,null):Object(a.createElement)(b.b,null)}(d,u)),Object(a.createElement)("span",{className:"woocommerce-search-list__item-label"},k?Object(a.createElement)("span",{className:"woocommerce-search-list__item-prefix"},1===(w=c.breadcrumbs).length?Object(i.first)(w):2===w.length?Object(i.first)(w)+" › "+Object(i.last)(w):Object(i.first)(w)+" … "+Object(i.last)(w)):null,Object(a.createElement)("span",{className:"woocommerce-search-list__item-name",dangerouslySetInnerHTML:{__html:m(c.name,j)}})),!!f&&Object(a.createElement)("span",{className:"woocommerce-search-list__item-count"},c.count))};p.propTypes={className:d.a.string,depth:d.a.number,item:d.a.object,isSelected:d.a.bool,isSingle:d.a.bool,onSelect:d.a.func,search:d.a.string,showCount:d.a.bool},t.a=p},25:function(e,t){!function(){e.exports=this.wp.editor}()},3:function(e,t){!function(){e.exports=this.wp.components}()},30:function(e,t){!function(){e.exports=this.wp.blocks}()},31:function(e,t,n){"use strict";var r=n(13),o=n.n(r),c=n(16),s=n.n(c),a=n(8),i=n.n(a),l=n(9),u=n.n(l),d=n(10),b=n.n(d),m=n(11),p=n.n(m),h=n(12),j=n.n(h),g=n(6),f=n.n(g),v=n(0),O=n(2),w=n(3),k=n(15),_=n(4),y=n(19),E=n.n(y),S=n(1),C=n.n(S),x=n(169);n(173);function I(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e,n=Object(_.groupBy)(e,"parent"),r=Object(_.keyBy)(t,"id"),c=function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(!t.parent)return t.name?[t.name]:[];var n=e(r[t.parent]);return[].concat(s()(n),[t.name])},a=function e(t){return t.map(function(t){var s=n[t.id];return delete n[t.id],o()({},t,{breadcrumbs:c(r[t.parent]),children:s&&s.length?e(s):[]})})},i=a(n[0]||[]);return delete n[0],Object(_.forEach)(n,function(e){i.push.apply(i,s()(a(e||[])))}),i}var z=n(24),N={clear:Object(O.__)("Clear all selected items","woo-gutenberg-products-block"),list:Object(O.__)("Results","woo-gutenberg-products-block"),noItems:Object(O.__)("No items found.","woo-gutenberg-products-block"),noResults:Object(O.__)("No results for %s","woo-gutenberg-products-block"),search:Object(O.__)("Search for items","woo-gutenberg-products-block"),selected:function(e){return Object(O.sprintf)(Object(O._n)("%d item selected","%d items selected",e,"woo-gutenberg-products-block"),e)},updated:Object(O.__)("Search results updated.","woo-gutenberg-products-block")},M=function(e){function t(){var e;return i()(this,t),(e=b()(this,p()(t).apply(this,arguments))).onSelect=e.onSelect.bind(f()(f()(e))),e.onRemove=e.onRemove.bind(f()(f()(e))),e.onClear=e.onClear.bind(f()(f()(e))),e.isSelected=e.isSelected.bind(f()(f()(e))),e.defaultRenderItem=e.defaultRenderItem.bind(f()(f()(e))),e.renderList=e.renderList.bind(f()(f()(e))),e}return j()(t,e),u()(t,[{key:"onRemove",value:function(e){var t=this.props,n=t.isSingle,r=t.onChange,o=t.selected;return function(){n&&r([]);var t=Object(_.findIndex)(o,{id:e});r([].concat(s()(o.slice(0,t)),s()(o.slice(t+1))))}}},{key:"onSelect",value:function(e){var t=this,n=this.props,r=n.isSingle,o=n.onChange,c=n.selected;return function(){t.isSelected(e)?t.onRemove(e.id)():o(r?[e]:[].concat(s()(c),[e]))}}},{key:"onClear",value:function(){this.props.onChange([])}},{key:"isSelected",value:function(e){return-1!==Object(_.findIndex)(this.props.selected,{id:e.id})}},{key:"getFilteredList",value:function(e,t){var n=this.props.isHierarchical;if(!t)return n?I(e):e;var r=o()({},N,this.props.messages),c=new RegExp(Object(_.escapeRegExp)(t),"i");this.props.debouncedSpeak(r.updated);var s=e.map(function(e){return!!c.test(e.name)&&e}).filter(Boolean);return n?I(s,e):s}},{key:"defaultRenderItem",value:function(e){return Object(v.createElement)(z.a,e)}},{key:"renderList",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=this.props,o=r.isSingle,c=r.search,s=this.props.renderItem||this.defaultRenderItem;return e?e.map(function(e){return Object(v.createElement)(v.Fragment,{key:e.id},s({item:e,isSelected:t.isSelected(e),onSelect:t.onSelect,isSingle:o,search:c,depth:n}),t.renderList(e.children,n+1))}):null}},{key:"renderListSection",value:function(){var e=this.props,t=e.isLoading,n=e.search,r=this.getFilteredList(this.props.list,n),c=o()({},N,this.props.messages);return t?Object(v.createElement)("div",{className:"woocommerce-search-list__list is-loading"},Object(v.createElement)(w.Spinner,null)):r.length?Object(v.createElement)(w.MenuGroup,{label:c.list,className:"woocommerce-search-list__list"},this.renderList(r)):Object(v.createElement)("div",{className:"woocommerce-search-list__list is-not-found"},Object(v.createElement)("span",{className:"woocommerce-search-list__not-found-icon"},Object(v.createElement)(E.a,{icon:"notice-outline",role:"img","aria-hidden":"true",focusable:"false"})),Object(v.createElement)("span",{className:"woocommerce-search-list__not-found-text"},n?Object(O.sprintf)(c.noResults,n):c.noItems))}},{key:"renderSelectedSection",value:function(){var e=this,t=this.props,n=t.isLoading,r=t.isSingle,c=t.selected,s=o()({},N,this.props.messages);if(n||r||!c)return null;var a=c.length;return Object(v.createElement)("div",{className:"woocommerce-search-list__selected"},Object(v.createElement)("div",{className:"woocommerce-search-list__selected-header"},Object(v.createElement)("strong",null,s.selected(a)),a>0?Object(v.createElement)(w.Button,{isLink:!0,isDestructive:!0,onClick:this.onClear,"aria-label":s.clear},Object(O.__)("Clear all","woo-gutenberg-products-block")):null),c.map(function(t,n){return Object(v.createElement)(x.a,{key:n,label:t.name,id:t.id,remove:e.onRemove})}))}},{key:"render",value:function(){var e=this.props,t=e.className,n=void 0===t?"":t,r=e.search,c=e.setState,s=o()({},N,this.props.messages);return Object(v.createElement)("div",{className:"woocommerce-search-list ".concat(n)},this.renderSelectedSection(),Object(v.createElement)("div",{className:"woocommerce-search-list__search"},Object(v.createElement)(w.TextControl,{label:s.search,type:"search",value:r,onChange:function(e){return c({search:e})}})),this.renderListSection())}}]),t}(v.Component);M.propTypes={className:C.a.string,isHierarchical:C.a.bool,isLoading:C.a.bool,isSingle:C.a.bool,list:C.a.arrayOf(C.a.shape({id:C.a.number,name:C.a.string})),messages:C.a.shape({clear:C.a.string,list:C.a.string,noItems:C.a.string,noResults:C.a.string,search:C.a.string,selected:C.a.func,updated:C.a.string}),onChange:C.a.func.isRequired,renderItem:C.a.func,selected:C.a.array.isRequired,search:C.a.string,setState:C.a.func,debouncedSpeak:C.a.func,instanceId:C.a.number};t.a=Object(k.compose)([Object(k.withState)({search:""}),w.withSpokenMessages,k.withInstanceId])(M)},4:function(e,t){!function(){e.exports=this.lodash}()},707:function(e,t,n){var r=n(708);"string"==typeof r&&(r=[[e.i,r,""]]);var o={hmr:!0,transform:void 0,insertInto:void 0};n(27)(r,o);r.locals&&(e.exports=r.locals)},708:function(e,t,n){},711:function(e,t,n){"use strict";n.r(t);var r=n(0),o=n(2),c=n(30),s=(n(707),n(8)),a=n.n(s),i=n(9),l=n.n(i),u=n(10),d=n.n(u),b=n(11),m=n.n(b),p=n(12),h=n.n(p),j=n(6),g=n.n(j),f=n(14),v=n.n(f),O=n(25),w=n(3),k=n(7),_=n.n(k),y=n(15),E=n(4),S=n(1),C=n.n(S),x=n(23),I=n(31),z=function(e){function t(){var e;return a()(this,t),(e=d()(this,m()(t).apply(this,arguments))).state={list:[],loading:!0},e}return h()(t,e),l()(t,[{key:"componentDidMount",value:function(){var e=this;v()({path:Object(x.addQueryArgs)("/wc-pb/v3/products",{per_page:-1,status:"publish"})}).then(function(t){e.setState({list:t,loading:!1})}).catch(function(){e.setState({list:[],loading:!1})})}},{key:"render",value:function(){var e=this.state,t=e.list,n=e.loading,c=this.props,s=c.onChange,a=c.selected,i={list:Object(o.__)("Products","woo-gutenberg-products-block"),noItems:Object(o.__)("Your store doesn't have any products.","woo-gutenberg-products-block"),search:Object(o.__)("Search for a product to display","woo-gutenberg-products-block"),updated:Object(o.__)("Product search results updated.","woo-gutenberg-products-block")};return Object(r.createElement)(r.Fragment,null,Object(r.createElement)(I.a,{className:"woocommerce-products",list:t,isLoading:n,isSingle:!0,selected:[Object(E.find)(t,{id:a})],onChange:s,messages:i}))}}]),t}(r.Component);z.propTypes={onChange:C.a.func.isRequired,selected:C.a.number.isRequired};var N=z;var M=function(e){function t(){var e;return a()(this,t),(e=d()(this,m()(t).apply(this,arguments))).state={product:!1,loaded:!1},e.debouncedGetProduct=Object(E.debounce)(e.getProduct.bind(g()(g()(e))),200),e}return h()(t,e),l()(t,[{key:"componentDidMount",value:function(){this.getProduct()}},{key:"componentDidUpdate",value:function(e){e.attributes.productId!==this.props.attributes.productId&&this.debouncedGetProduct()}},{key:"getProduct",value:function(){var e=this,t=this.props.attributes.productId;t?v()({path:"/wc-pb/v3/products/".concat(t)}).then(function(t){e.setState({product:t,loaded:!0})}).catch(function(){e.setState({product:!1,loaded:!0})}):this.setState({product:!1,loaded:!0})}},{key:"getInspectorControls",value:function(){var e=this.props,t=e.attributes,n=e.setAttributes,c=e.overlayColor,s=e.setOverlayColor;return Object(r.createElement)(O.InspectorControls,{key:"inspector"},Object(r.createElement)(w.PanelBody,{title:Object(o.__)("Product","woo-gutenberg-products-block"),initialOpen:!1},Object(r.createElement)(N,{selected:t.productId||0,onChange:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=e[0]?e[0].id:0;n({productId:t,mediaId:0,mediaSrc:""})}})),Object(r.createElement)(w.PanelBody,{title:Object(o.__)("Content","woo-gutenberg-products-block")},Object(r.createElement)(w.ToggleControl,{label:Object(o.__)("Show description","woo-gutenberg-products-block"),checked:t.showDesc,onChange:function(){return n({showDesc:!t.showDesc})}}),Object(r.createElement)(w.ToggleControl,{label:Object(o.__)("Show price","woo-gutenberg-products-block"),checked:t.showPrice,onChange:function(){return n({showPrice:!t.showPrice})}})),Object(r.createElement)(O.PanelColorSettings,{title:Object(o.__)("Overlay","woo-gutenberg-products-block"),colorSettings:[{value:c.color,onChange:s,label:Object(o.__)("Overlay Color","woo-gutenberg-products-block")}]},Object(r.createElement)(w.RangeControl,{label:Object(o.__)("Background Opacity","woo-gutenberg-products-block"),value:t.dimRatio,onChange:function(e){return n({dimRatio:e})},min:0,max:100,step:10})))}},{key:"renderEditMode",value:function(){var e=this.props,t=e.attributes,n=e.debouncedSpeak,c=e.setAttributes;return Object(r.createElement)(w.Placeholder,{icon:"star-filled",label:Object(o.__)("Featured Product","woo-gutenberg-products-block"),className:"wc-block-featured-product"},Object(o.__)("Visually highlight a product and encourage prompt action","woo-gutenberg-products-block"),Object(r.createElement)("div",{className:"wc-block-handpicked-products__selection"},Object(r.createElement)(N,{selected:t.productId||0,onChange:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=e[0]?e[0].id:0;c({productId:t,mediaId:0,mediaSrc:""})}}),Object(r.createElement)(w.Button,{isDefault:!0,onClick:function(){c({editMode:!1}),n(Object(o.__)("Showing Featured Product block preview.","woo-gutenberg-products-block"))}},Object(o.__)("Done","woo-gutenberg-products-block"))))}},{key:"render",value:function(){var e,t,n,c=this.props,s=c.attributes,a=c.setAttributes,i=c.overlayColor,l=s.contentAlign,u=s.dimRatio,d=s.editMode,b=s.linkText,m=s.showDesc,p=s.showPrice,h=this.state,j=h.loaded,g=h.product,f=_()("wc-block-featured-product",{"is-loading":!g&&!j,"is-not-found":!g&&j,"has-background-dim":0!==u},0===(e=u)||50===e?null:"has-background-dim-".concat(10*Math.round(e/10)),"center"!==l&&"has-".concat(l,"-content")),v=s.mediaId||(t=g.images,(n=void 0===t?[]:t).length&&n[0].id||0),k=g?function(e){var t,n;return Object(E.isObject)(e)&&(t=e.images,e=(n=void 0===t?[]:t).length&&n[0].src||""),e?{backgroundImage:"url(".concat(e,")")}:{}}(s.mediaSrc||g):{};return i.color&&(k.backgroundColor=i.color),Object(r.createElement)(r.Fragment,null,Object(r.createElement)(O.BlockControls,null,Object(r.createElement)(O.AlignmentToolbar,{value:l,onChange:function(e){a({contentAlign:e})}}),Object(r.createElement)(w.Toolbar,{controls:[{icon:"edit",title:Object(o.__)("Edit"),onClick:function(){return a({editMode:!d})},isActive:d}]}),Object(r.createElement)(O.MediaUploadCheck,null,Object(r.createElement)(w.Toolbar,null,Object(r.createElement)(O.MediaUpload,{onSelect:function(e){a({mediaId:e.id,mediaSrc:e.url})},allowedTypes:["image"],value:v,render:function(e){var t=e.open;return Object(r.createElement)(w.IconButton,{className:"components-toolbar__control",label:Object(o.__)("Edit media"),icon:"format-image",onClick:t})}})))),!s.editMode&&this.getInspectorControls(),d?this.renderEditMode():Object(r.createElement)(r.Fragment,null,g?Object(r.createElement)("div",{className:f,style:k},Object(r.createElement)("h2",{className:"wc-block-featured-product__title"},g.name),m&&Object(r.createElement)("div",{className:"wc-block-featured-product__description",dangerouslySetInnerHTML:{__html:g.short_description}}),p&&Object(r.createElement)("div",{className:"wc-block-featured-product__price",dangerouslySetInnerHTML:{__html:g.price_html}}),Object(r.createElement)("div",{className:"wc-block-featured-product__link wp-block-button"},Object(r.createElement)(O.RichText,{value:b,onChange:function(e){return a({linkText:e})},formattingControls:["bold","italic","strikethrough"],className:"wp-block-button__link",keepPlaceholderOnFocus:!0}))):Object(r.createElement)(w.Placeholder,{className:"wc-block-featured-product",icon:"star-filled",label:Object(o.__)("Featured Product","woo-gutenberg-products-block")},j?Object(o.__)("No product is selected.","woo-gutenberg-products-block"):Object(r.createElement)(w.Spinner,null))))}}]),t}(r.Component);M.propTypes={attributes:C.a.object.isRequired,name:C.a.string.isRequired,setAttributes:C.a.func.isRequired,overlayColor:C.a.object,setOverlayColor:C.a.func.isRequired,debouncedSpeak:C.a.func.isRequired};var R=Object(y.compose)([Object(O.withColors)({overlayColor:"background-color"}),w.withSpokenMessages])(M);Object(c.registerBlockType)("woocommerce/featured-product",{title:Object(o.__)("Featured Product","woo-gutenberg-products-block"),icon:"star-filled",category:"woocommerce",keywords:[Object(o.__)("WooCommerce","woo-gutenberg-products-block")],description:Object(o.__)("Visually highlight a product and encourage prompt action.","woo-gutenberg-products-block"),supports:{align:["wide","full"]},attributes:{contentAlign:{type:"string",default:"center"},dimRatio:{type:"number",default:50},editMode:{type:"boolean",default:!0},mediaId:{type:"number",default:0},mediaSrc:{type:"string",default:""},overlayColor:{type:"string"},customOverlayColor:{type:"string"},linkText:{type:"string",default:Object(o.__)("Shop now","woo-gutenberg-products-block")},productId:{type:"number"},showDesc:{type:"boolean",default:!0},showPrice:{type:"boolean",default:!0}},edit:function(e){return Object(r.createElement)(R,e)},save:function(){return null}})}}));